<!DOCTYPE html>

<html>

<head>
	<meta charset='utf-8'>
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<title>Shape emitter - Physijs</title>
	
	<link rel="stylesheet" type="text/css" href="stylesheets/styles.css" />
	
	<script type="text/javascript" src="javascripts/three.min.js"></script>
	<script type="text/javascript" src="javascripts/OrbitControls.js"></script>
	<script type="text/javascript" src="javascripts/stats.js"></script>
	<script type="text/javascript" src="javascripts/tween.js"></script>
	<script type="text/javascript" src="javascripts/physi.js"></script>
	<script type="text/javascript" src="javascripts/ConvexGeometry.js"></script>
	<script type="text/javascript" src="javascripts/RandomPolyhedron.js"></script>
	<script type="text/javascript" src="javascripts/PolyhedronVolumeCalculator.js"></script>
	<script type="text/javascript" src="javascripts/Pyramid.js"></script>
	<script type="text/javascript" src="javascripts/Polygon.js"></script>
	<script type="text/javascript" src="javascripts/Vector.js"></script>
	<script type="text/javascript" src="javascripts/Point.js"></script>
	<script type="text/javascript" src="javascripts/fileutils.js"></script>
	<script type="text/javascript" src="javascripts/FileSaver.min.js"></script>
	<script type="text/javascript" src="javascripts/Worker.js"></script>
	<script type="text/javascript" src="javascripts/View.js"></script>

	
	<script type="text/javascript">

		var view = new ThreejsView();

		view.animate();
		work(view.scene);
		view.animate();

//	'use strict';
//
//	Physijs.scripts.worker = 'javascripts/physijs_worker.js';
//	Physijs.scripts.ammo = 'ammo.js';
//
//	var initScene, render, createShape,
//		renderer, render_stats, physics_stats, scene, light, ground, ground_material, wall_material, camera, axis, isPaused, unpauseSimulation;
//
//	var total_volume = 0.0;
//	var box_volume = 0.0;
//	var rate = 0.0;
//
//	initScene = function() {
//		TWEEN.start();
//
//		renderer = new THREE.WebGLRenderer({ antialias: true });
//		renderer.setSize( window.innerWidth, window.innerHeight );
//		renderer.shadowMapEnabled = true;
//		renderer.shadowMapSoft = true;
//		document.getElementById( 'viewport' ).appendChild( renderer.domElement );
//
//		render_stats = new Stats();
//		render_stats.domElement.style.position = 'absolute';
//		render_stats.domElement.style.top = '0px';
//		render_stats.domElement.style.zIndex = 100;
//		document.getElementById( 'viewport' ).appendChild( render_stats.domElement );
//
//		physics_stats = new Stats();
//		physics_stats.domElement.style.position = 'absolute';
//		physics_stats.domElement.style.top = '50px';
//		physics_stats.domElement.style.zIndex = 100;
//		document.getElementById( 'viewport' ).appendChild( physics_stats.domElement );
//
////		scene = new Physijs.Scene({ fixedTimeStep: 1 / 120 });
//		scene = new THREE.Scene();
////		scene.setGravity(new THREE.Vector3( -30, -30, -30 ));
////		scene.addEventListener(
////			'update',
////			function() {
////				scene.simulate( undefined, 2 );
////				physics_stats.update();
////			}
////		);
//
//		camera = new THREE.PerspectiveCamera(
//			35,
//			window.innerWidth / window.innerHeight,
//			1,
//			1000
//		);
//		// camera.position.set( 60, 50, 60 );
//		camera.position.set( 650, 350, 650 );
////		camera.position.set( 450, 150, 450 );
////		camera.position.set( 0, 850, 0 );
////		camera.position.set( 450, 0, 450 );
//
//		camera.lookAt( scene.position );
////		camera.lookAt( );
//		scene.add( camera );
//
//		// Axis
//		axis = new THREE.AxisHelper( 190 );
//		axis.position.set( 0, 0, 0 );
//		scene.add( axis );
//
//		// Light
//		light = new THREE.DirectionalLight( 0xFFFFFF );
//		light.position.set( 100, 100, -15 );
//		light.target.position.copy( scene.position );
//		light.castShadow = false;
//		light.shadowCameraLeft = -60;
//		light.shadowCameraTop = -60;
//		light.shadowCameraRight = 60;
//		light.shadowCameraBottom = 60;
//		light.shadowCameraNear = 20;
//		light.shadowCameraFar = 200;
//		light.shadowBias = -.0001
//		light.shadowMapWidth = light.shadowMapHeight = 2048;
//		light.shadowDarkness = .7;
//		scene.add( light );
//
//		// Materials
//		wall_material = Physijs.createMaterial(
//		//new THREE.MeshLambertMaterial( { ambient: 0xf6f6f6, transparent: true}),//, map: map } ),
//			new THREE.MeshBasicMaterial( { color: 0xffffff, wireframe: true, transparent: true, opacity: 1 } )
//		);
//		ground_material = Physijs.createMaterial(
//			new THREE.MeshLambertMaterial({ map: THREE.ImageUtils.loadTexture( 'images/rocks.jpg' ) }),
//			.8, // high friction
//			.4 // low restitution
//		);
//		ground_material.map.wrapS = ground_material.map.wrapT = THREE.RepeatWrapping;
//		ground_material.map.repeat.set( 2.5, 2.5 );
//
//
////		createShape();
//
////		randomGenAndPutInSubBox3();
//
//		work(scene);
//
//	};
//
//	render = function() {
//		var timer = Date.now() * 0.0006;
//
//		camera.position.x = Math.cos( timer ) * 650;
//		//camera.position.y = Math.sin( timer ) * 200;
//		// // camera.position.y = 0;
//		camera.position.z = Math.sin( timer ) * 650;
//		//camera.position.x = 800;
//		//camera.position.z = 800;
//
//		//camera.lookAt( scene.position );
//		camera.lookAt({x: 75, y: 75, z: 75});
//
//		if (!isPaused) {
//			scene.simulate();
//		}
//		requestAnimationFrame( render );
//		renderer.render( scene, camera );
//		render_stats.update();
//	};
//
//	unpauseSimulation = function() {
//		isPaused = false;
//		scene.onSimulationResume();
//	};
//
//	window.onload = initScene;
	
	</script>
</head>

<body>
	<div id="heading">
		<!--<h1>Shapes in Physijs</h1>-->
		<!--<p>-->
			<!--All of the supported shapes in Physijs --->
			<!--<span id="shapecount"></span> <button id="stop">Stop adding shapes</button><br />-->
		<!--</p>-->
	</div>
	<div id="viewport"></div>
</body>
</html>
